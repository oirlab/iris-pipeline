
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Example pipeline execution &#8212; iris_pipeline v0.4.dev312</title>
    <link rel="stylesheet" href="_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="shortcut icon" href="_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="IRIS Data Reduction System design" href="design.html" />
    <link rel="prev" title="Getting started" href="getting-started.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">iris_pipeline</span><span id="logotext2"></span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="design.html" title="IRIS Data Reduction System design">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="getting-started.html" title="Getting started">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="index.html">iris_pipeline v0.4.dev312</a>
	 &#187;
      </li>
      
      <li>Example pipeline execution</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<p>
  <strong>
    
    You're reading an old version of this documentation.
    If you want up-to-date information, please have a look at <a href="../master/example-run.html">master</a>.
    
  <strong>
</p>


  <div class="section" id="example-pipeline-execution">
<h1>Example pipeline execution<a class="headerlink" href="#example-pipeline-execution" title="Permalink to this headline">¶</a></h1>
<p>Here is an example of what it takes to configure and run a pipeline with
flat-fielding and background subtraction,</p>
<div class="section" id="setup-crds">
<h2>Setup CRDS<a class="headerlink" href="#setup-crds" title="Permalink to this headline">¶</a></h2>
<p>Make sure you have a local checkout of the CRDS cache as explained in the
<a class="reference external" href="getting-started">Getting started</a> page.
Run the <code class="docutils literal notranslate"><span class="pre">setup_local_crds.sh</span></code> to setup the enviroment variables needed
to point the <code class="docutils literal notranslate"><span class="pre">crds</span></code> software to the CRDS cache. Optionally source
this in your shell configuration to automatically set this up.</p>
</div>
<div class="section" id="get-input-simulations">
<h2>Get input simulations<a class="headerlink" href="#get-input-simulations" title="Permalink to this headline">¶</a></h2>
<p>Download simulated input FITS files for the IRIS
imager from <a class="reference external" href="https://figshare.com/articles/TMT_IRIS_test_simulations/9941939">Figshare</a>.
It contains a raw science frame, a raw flat frame and a raw background frame.</p>
</div>
<div class="section" id="preprocess-the-flat-frame">
<h2>Preprocess the flat frame<a class="headerlink" href="#preprocess-the-flat-frame" title="Permalink to this headline">¶</a></h2>
<p>First we need to remove the dark frame from the flat frame and normalize it.
A dark frame is already available in the CRDS and the pipeline knows how to retrieve
it based on the metadata in the FITS file headers.</p>
<p>We can check in the package <code class="xref py py-obj docutils literal notranslate"><span class="pre">documentation</span></code> what are the available pipelines and check the configuration options of the <code class="xref py py-class docutils literal notranslate"><span class="pre">pipeline.ProcessFlatfieldL2</span></code> class.</p>
<p>We do not need to customize it so we can directly call it from <code class="docutils literal notranslate"><span class="pre">tmtrun</span></code> and pass the input FITS file:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">tmtrun</span> <span class="n">iris_pipeline</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">ProcessFlatfieldL2</span> <span class="n">raw_flat_frame_cal</span><span class="o">.</span><span class="n">fits</span>
</pre></div>
</div>
<p>This will pickup the relevant dark frame from the CRDS and process the file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2019</span>-10-04 <span class="m">17</span>:59:48,057 - stpipe.ProcessFlatfieldL2 - INFO - ProcessFlatfieldL2 instance created.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:48,059 - stpipe.ProcessFlatfieldL2.dark_current - INFO - DarkCurrentStep instance created.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:48,060 - stpipe.ProcessFlatfieldL2.normalize - INFO - NormalizeStep instance created.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:48,099 - stpipe.ProcessFlatfieldL2 - INFO - Step ProcessFlatfieldL2 running with args <span class="o">(</span><span class="s1">&#39;raw_flat_frame_cal.fits&#39;</span>,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:48,554 - stpipe.ProcessFlatfieldL2 - INFO - Prefetching reference files <span class="k">for</span> dataset: <span class="s1">&#39;raw_flat_frame_cal.fits&#39;</span> <span class="nv">reftypes</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;dark&#39;</span><span class="o">]</span>
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:49,306 - stpipe.ProcessFlatfieldL2 - INFO - Prefetch <span class="k">for</span> DARK reference file is <span class="s1">&#39;/home/azonca/crds_cache/references/tmt/iris/tmt_iris_dark_0001.fits&#39;</span>.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:49,307 - stpipe.ProcessFlatfieldL2 - INFO - Starting preprocess flatfield ...
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:53,490 - stpipe.ProcessFlatfieldL2 - INFO - Processing product raw_flat_frame
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:53,490 - stpipe.ProcessFlatfieldL2 - INFO - Working on input raw_flat_frame_cal.fits ...
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:53,641 - stpipe.ProcessFlatfieldL2.dark_current - INFO - Step dark_current running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_flat_frame_cal.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:53,658 - stpipe.ProcessFlatfieldL2.dark_current - INFO - Using DARK reference file /home/azonca/crds_cache/references/tmt/iris/tmt_iris_dark_0001.fits
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,058 - stpipe.ProcessFlatfieldL2.dark_current - INFO - Step dark_current <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,101 - stpipe.ProcessFlatfieldL2.normalize - INFO - Step normalize running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_flat_frame_cal.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,472 - stpipe.ProcessFlatfieldL2.normalize - INFO - Step normalize <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,472 - stpipe.ProcessFlatfieldL2 - INFO - Finished processing product raw_flat_frame
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,473 - stpipe.ProcessFlatfieldL2 - INFO - ... ending preprocess flatfield
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,811 - stpipe.ProcessFlatfieldL2 - INFO - Saved model in raw_flat_frame_flat.fits
<span class="m">2019</span>-10-04 <span class="m">17</span>:59:54,811 - stpipe.ProcessFlatfieldL2 - INFO - Step ProcessFlatfieldL2 <span class="k">done</span>
</pre></div>
</div>
<p>We have an output file <code class="docutils literal notranslate"><span class="pre">raw_flat_frame_flat.fits</span></code> and we can rename it:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">mv</span> <span class="n">raw_flat_frame_flat</span><span class="o">.</span><span class="n">fits</span> <span class="n">flat</span><span class="o">.</span><span class="n">fits</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-the-image-processing-pipeline">
<h2>Configure the image processing pipeline<a class="headerlink" href="#configure-the-image-processing-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessImagerL2Pipeline</span></code> can be configured using a INI-style configuration file,
<code class="docutils literal notranslate"><span class="pre">image2_iris.cfg</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">name</span> <span class="o">=</span> <span class="s">&quot;ProcessImagerL2Pipeline&quot;</span>
<span class="na">class</span> <span class="o">=</span> <span class="s">&quot;iris_pipeline.pipeline.ProcessImagerL2Pipeline&quot;</span>
<span class="na">save_results</span> <span class="o">=</span> <span class="s">True</span>
<span class="s">    [steps]</span>
<span class="s">      [[bkg_subtract]]</span>
<span class="s">      [[assign_wcs]]</span>
<span class="s">        skip = True</span>
<span class="s">      [[flat_field]]</span>
<span class="s">        config_file = flat_field.cfg</span>
<span class="s">      [[photom]]</span>
<span class="s">        skip = True</span>
<span class="s">      [[resample]]</span>
<span class="s">        skip = True</span>
</pre></div>
</div>
<p>first we specify that we want to execute the pipeline defined in
<a class="reference internal" href="api/iris_pipeline.pipeline.ProcessImagerL2Pipeline.html#iris_pipeline.pipeline.ProcessImagerL2Pipeline" title="iris_pipeline.pipeline.ProcessImagerL2Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">iris_pipeline.pipeline.ProcessImagerL2Pipeline</span></code></a>, then we can configure each of
the steps, for example skip some of them. Also we can import the
configuration of a step from another file, in this case
<code class="docutils literal notranslate"><span class="pre">flat_field.cfg</span></code>:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">name</span> <span class="o">=</span> <span class="s">&quot;flat_field&quot;</span>
<span class="na">class</span> <span class="o">=</span> <span class="s">&quot;jwst.flatfield.FlatFieldStep&quot;</span>
<span class="c1"># Optional filename suffix for output flats (only for MOS data).</span>
<span class="na">flat_suffix</span> <span class="o">=</span> <span class="s">None</span>
<span class="na">override_flat</span> <span class="o">=</span> <span class="s">&#39;flat.fits&#39;</span>
</pre></div>
</div>
<p>If we do not define <code class="docutils literal notranslate"><span class="pre">override_flat</span></code>, the pipeline will look up a suitable flat from
the CRDS, in this case instead we specify a local <code class="docutils literal notranslate"><span class="pre">flat.fits</span></code> file.</p>
</div>
<div class="section" id="define-the-input-data">
<h2>Define the input data<a class="headerlink" href="#define-the-input-data" title="Permalink to this headline">¶</a></h2>
<p>JWST created a specification for defining how input files should be used
by a pipeline, it is a JSON file named an association, see <a class="reference external" href="https://jwst-docs.stsci.edu/display/JDAT/Understanding+Associations">the JWST
documentation</a>.</p>
<p>In our example we need to specify a input raw science frame ad a
background to be subtracted, see <code class="docutils literal notranslate"><span class="pre">asn_subtract_bg_flat.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;asn_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;Asn_Lv2Image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;asn_pool&quot;</span><span class="p">:</span> <span class="s2">&quot;pool&quot;</span><span class="p">,</span>
    <span class="nt">&quot;asn_type&quot;</span><span class="p">:</span> <span class="s2">&quot;image2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;products&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_iris_subtract_bg_flat&quot;</span><span class="p">,</span>
            <span class="nt">&quot;members&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">&quot;expname&quot;</span><span class="p">:</span> <span class="s2">&quot;raw_science_frame_sci.fits&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;exptype&quot;</span><span class="p">:</span> <span class="s2">&quot;science&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="nt">&quot;expname&quot;</span><span class="p">:</span> <span class="s2">&quot;raw_background_frame_cal.fits&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;exptype&quot;</span><span class="p">:</span> <span class="s2">&quot;background&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="execute-the-pipeline-from-the-command-line">
<h2>Execute the pipeline from the command line<a class="headerlink" href="#execute-the-pipeline-from-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>We can use <code class="docutils literal notranslate"><span class="pre">tmtrun</span></code> from a terminal to execute the pipeline:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">tmtrun</span> <span class="n">image2_iris</span><span class="o">.</span><span class="n">cfg</span> <span class="n">asn_subtract_bg_flat</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>here is the output log:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,453 - stpipe.ProcessImagerL2Pipeline - INFO - ProcessImagerL2Pipeline instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,454 - stpipe.ProcessImagerL2Pipeline.bkg_subtract - INFO - BackgroundStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,456 - stpipe.ProcessImagerL2Pipeline.assign_wcs - INFO - AssignWcsStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,458 - stpipe.ProcessImagerL2Pipeline.dark_current - INFO - DarkCurrentStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,460 - stpipe.ProcessImagerL2Pipeline.flat_field - INFO - FlatFieldStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,461 - stpipe.ProcessImagerL2Pipeline.photom - INFO - PhotomStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,463 - stpipe.ProcessImagerL2Pipeline.resample - INFO - ResampleStep instance created.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:46,500 - stpipe.ProcessImagerL2Pipeline - INFO - Step ProcessImagerL2Pipeline running with args <span class="o">(</span><span class="s1">&#39;asn_subtract_bg_flat.json&#39;</span>,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,130 - stpipe.ProcessImagerL2Pipeline - INFO - Prefetching reference files <span class="k">for</span> dataset: <span class="s1">&#39;raw_science_frame_sci.fits&#39;</span> <span class="nv">reftypes</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;dark&#39;</span><span class="o">]</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,645 - stpipe.ProcessImagerL2Pipeline - INFO - Prefetch <span class="k">for</span> DARK reference file is <span class="s1">&#39;/home/azonca/crds_cache/references/tmt/iris/tmt_iris_dark_0001.fits&#39;</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,645 - stpipe.ProcessImagerL2Pipeline - INFO - Override <span class="k">for</span> FLAT reference file is <span class="s1">&#39;/home/azonca/p/software/iris_pipeline/iris_pipeline/tests/data/flat.fits&#39;</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,645 - stpipe.ProcessImagerL2Pipeline - INFO - Prefetching reference files <span class="k">for</span> dataset: <span class="s1">&#39;raw_background_frame_cal.fits&#39;</span> <span class="nv">reftypes</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;dark&#39;</span><span class="o">]</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,651 - stpipe.ProcessImagerL2Pipeline - INFO - Prefetch <span class="k">for</span> DARK reference file is <span class="s1">&#39;/home/azonca/crds_cache/references/tmt/iris/tmt_iris_dark_0001.fits&#39;</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,651 - stpipe.ProcessImagerL2Pipeline - INFO - Override <span class="k">for</span> FLAT reference file is <span class="s1">&#39;/home/azonca/p/software/iris_pipeline/iris_pipeline/tests/data/flat.fits&#39;</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,651 - stpipe.ProcessImagerL2Pipeline - INFO - Starting calwebb_image2 ...
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,659 - stpipe.ProcessImagerL2Pipeline - INFO - Processing product test_iris_subtract_bg_flat
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,659 - stpipe.ProcessImagerL2Pipeline - INFO - Working on input raw_science_frame_sci.fits ...
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:47,918 - stpipe.ProcessImagerL2Pipeline.bkg_subtract - INFO - Step bkg_subtract running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_science_frame_sci.fits&gt;, <span class="o">[</span><span class="s1">&#39;raw_background_frame_cal.fits&#39;</span><span class="o">])</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,796 - stpipe.ProcessImagerL2Pipeline.bkg_subtract - INFO - Step bkg_subtract <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,854 - stpipe.ProcessImagerL2Pipeline.assign_wcs - INFO - Step assign_wcs running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_science_frame_sci.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,855 - stpipe.ProcessImagerL2Pipeline.assign_wcs - INFO - Step skipped.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,856 - stpipe.ProcessImagerL2Pipeline.assign_wcs - INFO - Step assign_wcs <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,898 - stpipe.ProcessImagerL2Pipeline.dark_current - INFO - Step dark_current running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_science_frame_sci.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:53,945 - stpipe.ProcessImagerL2Pipeline.dark_current - INFO - Using DARK reference file /home/azonca/crds_cache/references/tmt/iris/tmt_iris_dark_0001.fits
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:54,503 - stpipe.ProcessImagerL2Pipeline.dark_current - INFO - Step dark_current <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:54,566 - stpipe.ProcessImagerL2Pipeline.flat_field - INFO - Step flat_field running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_science_frame_sci.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,328 - stpipe.ProcessImagerL2Pipeline.flat_field - INFO - Step flat_field <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,369 - stpipe.ProcessImagerL2Pipeline.photom - INFO - Step photom running with args <span class="o">(</span>&lt;IRISImageModel<span class="o">(</span><span class="m">4096</span>, <span class="m">4096</span><span class="o">)</span> from raw_science_frame_sci.fits&gt;,<span class="o">)</span>.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,369 - stpipe.ProcessImagerL2Pipeline.photom - INFO - Step skipped.
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,370 - stpipe.ProcessImagerL2Pipeline.photom - INFO - Step photom <span class="k">done</span>
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,370 - stpipe.ProcessImagerL2Pipeline - INFO - Finished processing product test_iris_subtract_bg_flat
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,370 - stpipe.ProcessImagerL2Pipeline - INFO - ... ending calwebb_image2
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,606 - stpipe.ProcessImagerL2Pipeline - INFO - Saved model in test_iris_subtract_bg_flat_cal.fits
<span class="m">2019</span>-10-04 <span class="m">18</span>:13:55,606 - stpipe.ProcessImagerL2Pipeline - INFO - Step ProcessImagerL2Pipeline <span class="k">done</span>
</pre></div>
</div>
<p>After
completion, the reduced science frame
<code class="docutils literal notranslate"><span class="pre">test_iris_subtract_bg_flat_cal.fits</span></code> is written to disk, it includes
all the metadata it had initially and additional details about the
processing steps that were executed.</p>
</div>
<div class="section" id="run-on-subarrays">
<h2>Run on subarrays<a class="headerlink" href="#run-on-subarrays" title="Permalink to this headline">¶</a></h2>
<p>The image processing pipeline also supports running on subarrays, i.e. rectangular subsets
of the detector which can be readout at a higher rate.</p>
<p>See:</p>
<ul class="simple">
<li><p>an example <a class="reference external" href="https://figshare.com/articles/TMT-IRIS_raw_science_frame_subarray/11953512">subarray raw science frame on Figshare</a></p></li>
<li><p>a <a class="reference external" href="https://github.com/oirlab/iris_pipeline/blob/master/iris_pipeline/tests/run_image2_subarray.ipynb">notebook in the repository</a> which configures, runs and displays the results on the dataset above</p></li>
</ul>
</div>
</div>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3>Releases</h3>
<ul>
  <li><a href="../0.2.0/example-run.html">0.2.0</a></li>
  <li><a href="example-run.html">0.3.0</a></li>
</ul>
<h3>In Development</h3>
<ul>
  <li><a href="../master/example-run.html">master</a></li>
</ul>


<h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Example pipeline execution</a><ul>
<li><a class="reference internal" href="#setup-crds">Setup CRDS</a></li>
<li><a class="reference internal" href="#get-input-simulations">Get input simulations</a></li>
<li><a class="reference internal" href="#preprocess-the-flat-frame">Preprocess the flat frame</a></li>
<li><a class="reference internal" href="#configure-the-image-processing-pipeline">Configure the image processing pipeline</a></li>
<li><a class="reference internal" href="#define-the-input-data">Define the input data</a></li>
<li><a class="reference internal" href="#execute-the-pipeline-from-the-command-line">Execute the pipeline from the command line</a></li>
<li><a class="reference internal" href="#run-on-subarrays">Run on subarrays</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="https://github.com/oirlab/iris_pipeline/tree/master/docs/example-run.rst">Edit This Page on Github</a> &nbsp;
    <a href="_sources/example-run.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2020, Andrea Zonca, Arun Surya.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 3.2.1. &nbsp;
    Last built 28 Sep 2020. <br/>
  </p>
</footer>
  </body>
</html>